<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0">‚úèÔ∏è Editar Meu Perfil</h4>
            </div>
            
            <div class="card-body">
                <!-- Mensagens de Sucesso/Erro -->
                <% if (erro) { %>
                    <div class="alert alert-danger alert-dismissible fade show">
                        <strong>‚ö†Ô∏è Erro:</strong> <%= erro %>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                <% } %>
                
                <% if (sucesso) { %>
                    <div class="alert alert-success alert-dismissible fade show">
                        <strong>‚úÖ Sucesso!</strong> <%= sucesso %>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                <% } %>
                
                <!-- Formul√°rio de Edi√ß√£o -->
                <form action="/perfil/atualizar" method="POST" onsubmit="return validarEdicao()">
                    <div class="mb-3">
                        <label for="nome" class="form-label">Nome Completo</label>
                        <input type="text" class="form-control" id="nome" name="nome" 
                               value="<%= usuario.nome %>" required
                               placeholder="Digite seu nome completo">
                        <div class="form-text">Como voc√™ quer ser chamado na plataforma.</div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email" 
                               value="<%= usuario.email %>" required
                               placeholder="seu.email@exemplo.com">
                        <div class="form-text">Seu email de login. Deve ser √∫nico.</div>
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="/perfil" class="btn btn-outline-secondary me-md-2">
                            ‚Üê Cancelar
                        </a>
                        <button type="submit" class="btn btn-success">
                            üíæ Salvar Altera√ß√µes
                        </button>
                    </div>
                </form>
                
                <hr class="my-4">
                
                <!-- √Årea de Exclus√£o de Conta -->
                <div class="alert alert-danger border-danger">
                    <h5 class="alert-heading">‚ö†Ô∏è Zona de Perigo</h5>
                    <p class="mb-2">
                        <strong>Aten√ß√£o!</strong> Ao deletar sua conta:
                    </p>
                    <ul class="mb-3">
                        <li>Todos os seus dados ser√£o <strong>permanentemente</strong> removidos</li>
                        <li>Seu progresso ser√° perdido</li>
                        <li>Esta a√ß√£o <strong>N√ÉO pode ser desfeita</strong></li>
                    </ul>
                    
                    <form action="/perfil/deletar" method="POST" 
                          onsubmit="return confirmarExclusao()">
                        <div class="mb-3">
                            <label for="confirmacao" class="form-label">
                                Digite <span class="badge bg-dark">CONFIRMAR</span> para continuar:
                            </label>
                            <input type="text" class="form-control text-center" 
                                   id="confirmacao" name="confirmacao" 
                                   required autocomplete="off"
                                   placeholder="CONFIRMAR">
                        </div>
                        <button type="submit" class="btn btn-danger w-100">
                            üóëÔ∏è Deletar Minha Conta
                        </button>
                    </form>
                </div>
                
                <div class="text-center mt-3">
                    <a href="/perfil" class="btn btn-outline-success btn-sm">
                        ‚Üê Voltar ao Perfil
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scripts de Valida√ß√£o -->
<script>
function validarEdicao() {
    const nome = document.getElementById('nome').value.trim();
    const email = document.getElementById('email').value.trim();
    
    if (!nome || !email) {
        alert('‚ùå Por favor, preencha todos os campos!');
        return false;
    }
    
    if (nome.length < 3) {
        alert('‚ùå O nome deve ter pelo menos 3 caracteres!');
        return false;
    }
    
    const regexEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!regexEmail.test(email)) {
        alert('‚ùå Por favor, insira um email v√°lido! (exemplo@email.com)');
        return false;
    }
    
    return true;
}

function confirmarExclusao() {
    const confirmacao = document.getElementById('confirmacao').value;
    
    if (confirmacao !== 'CONFIRMAR') {
        alert('‚ùå Voc√™ deve digitar exatamente "CONFIRMAR" para deletar a conta.');
        return false;
    }
    
    return confirm('‚ö†Ô∏è Tem certeza que quer DELETAR SUA CONTA? Esta a√ß√£o √© IRREVERS√çVEL!');
}
</script>